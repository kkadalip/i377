<?xml version="1.0" ?>
<project name="kkadalip" default="compile" basedir="." >
    <description>
        Minu elu esimene ANT-i build fail
    </description>
	
	<target name="compile" depends="clean, init">
		<javac srcdir="src"
		   	   destdir="build/classes"
			   source="1.6" target="1.6" includeantruntime="false"
		   	   classpath="WebContent/WEB-INF/lib/servlet-api.jar;WebContent/WEB-INF/"/>
	</target>
	
	<target name="init">
		<mkdir dir="build/classes" />
	</target>
	
	<target name="clean">
		<delete dir="build" />
	</target>
	
	<property name="webContent.dir" location="WebContent" />
	<property name="war.file" location="test.war" />
	
	<target name="war" depends="compile">
		<war destfile="${war.file}"
		webxml="${webContent.dir}/WEBINF/web.xml">
		<classes dir="${classes.dir}" />
		<fileset dir="${webContent.dir}"
		excludes="**/servletapi.
		jar" />
		</war>
	</target>
	
	<target name="test">
		<junit printsummary="yes" haltonfailure="yes">
			<classpath>
				<pathelement location="${build.tests}"/>
				<pathelement path="${java.class.path}"/>
			</classpath>
				<formatter type="plain"/>
				<test name="my.test.TestCase" haltonfailure="no" outfile="result">
			<formatter type="xml"/>
			</test>
			<batchtest fork="no" todir="${reports.tests}">
				<fileset dir="${src.tests}">
					<include name="**/*Test*.java"/>
					<exclude name="**/*Util.java"/>
				</fileset>
			</batchtest>
		</junit>
	</target>
	
</project>